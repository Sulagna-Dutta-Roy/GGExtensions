/*
 * jQuery MiniColors: A tiny color picker built on jQuery
 * Copyright Cory LaViska for A Beautiful Site, LLC. (http://www.abeautifulsite.net/)
 * Dual-licensed under the MIT and GPL Version 2 licenses
*/
jQuery&&function(c){function G(a,b){var k=c('<span class="minicolors" />'),w=c.minicolors.defaultSettings;a.data("minicolors-initialized")||(b=c.extend(!0,{},w,b),k.addClass("minicolors-theme-"+b.theme).addClass("minicolors-swatch-position-"+b.swatchPosition).toggleClass("minicolors-swatch-left","left"===b.swatchPosition).toggleClass("minicolors-with-opacity",b.opacity),void 0!==b.position&&c.each(b.position.split(" "),function(){k.addClass("minicolors-position-"+this)}),a.addClass("minicolors-input").data("minicolors-initialized",
!0).data("minicolors-settings",b).prop("size",7).prop("maxlength",7).wrap(k).after('<span class="minicolors-panel minicolors-slider-'+b.control+'"><span class="minicolors-slider"><span class="minicolors-picker"></span></span><span class="minicolors-opacity-slider"><span class="minicolors-picker"></span></span><span class="minicolors-grid"><span class="minicolors-grid-inner"></span><span class="minicolors-picker"><span></span></span></span></span>'),a.parent().find(".minicolors-panel").on("selectstart",
function(){return!1}).end(),"left"===b.swatchPosition?a.before('<span class="minicolors-swatch"><span></span></span>'):a.after('<span class="minicolors-swatch"><span></span></span>'),b.textfield||a.addClass("minicolors-hidden"),b.inline&&a.parent().addClass("minicolors-inline"),y(a,!1,!0))}function C(a){var b=a.parent();a.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").prop("maxlength",null).removeClass("minicolors-input");b.before(a).remove()}function A(a){var b=
a.parent(),k=b.find(".minicolors-panel"),c=a.data("minicolors-settings");!a.data("minicolors-initialized")||(a.prop("disabled")||b.hasClass("minicolors-inline")||b.hasClass("minicolors-focus"))||(t(),b.addClass("minicolors-focus"),k.stop(!0,!0).fadeIn(c.showSpeed,function(){c.show&&c.show.call(a.get(0))}))}function t(){c(".minicolors-input").each(function(){var a=c(this),b=a.data("minicolors-settings"),k=a.parent();b.inline||k.find(".minicolors-panel").fadeOut(b.hideSpeed,function(){k.hasClass("minicolors-focus")&&
b.hide&&b.hide.call(a.get(0));k.removeClass("minicolors-focus")})})}function D(a,b,k){var c=a.parents(".minicolors").find(".minicolors-input"),h=c.data("minicolors-settings"),d=a.find("[class$=-picker]"),f=a.offset().left,e=a.offset().top,g=Math.round(b.pageX-f),l=Math.round(b.pageY-e);k=k?h.animationSpeed:0;b.originalEvent.changedTouches&&(g=b.originalEvent.changedTouches[0].pageX-f,l=b.originalEvent.changedTouches[0].pageY-e);0>g&&(g=0);0>l&&(l=0);g>a.width()&&(g=a.width());l>a.height()&&(l=a.height());
a.parent().is(".minicolors-slider-wheel")&&d.parent().is(".minicolors-grid")&&(f=75-g,e=75-l,b=Math.sqrt(f*f+e*e),f=Math.atan2(e,f),0>f&&(f+=2*Math.PI),75<b&&(b=75,g=75-75*Math.cos(f),l=75-75*Math.sin(f)),g=Math.round(g),l=Math.round(l));a.is(".minicolors-grid")?d.stop(!0).animate({top:l+"px",left:g+"px"},k,h.animationEasing,function(){E(c,a)}):d.stop(!0).animate({top:l+"px"},k,h.animationEasing,function(){E(c,a)})}function E(a,b){function k(a,b){var c,k;if(!a.length||!b)return null;c=a.offset().left;
k=a.offset().top;return{x:c-b.offset().left+a.outerWidth()/2,y:k-b.offset().top+a.outerHeight()/2}}var c,h,d,f,p,g;f=a.val();var l=a.attr("data-opacity");p=a.parent();var x=a.data("minicolors-settings");p.find(".minicolors-panel");var t=p.find(".minicolors-swatch");g=p.find(".minicolors-grid");var s=p.find(".minicolors-slider"),v=p.find(".minicolors-opacity-slider");d=g.find("[class$=-picker]");var n=s.find("[class$=-picker]"),m=v.find("[class$=-picker]");d=k(d,g);n=k(n,s);m=k(m,v);if(b.is(".minicolors-grid, .minicolors-slider")){switch(x.control){case "wheel":f=
g.width()/2-d.x;p=g.height()/2-d.y;g=Math.sqrt(f*f+p*p);f=Math.atan2(p,f);0>f&&(f+=2*Math.PI);75<g&&(g=75,d.x=69-75*Math.cos(f),d.y=69-75*Math.sin(f));h=e(g/0.75,0,100);c=e(180*f/Math.PI,0,360);d=e(100-Math.floor(n.y*(100/s.height())),0,100);f=u({h:c,s:h,b:d});s.css("backgroundColor",u({h:c,s:h,b:100}));break;case "saturation":c=e(parseInt(d.x*(360/g.width())),0,360);h=e(100-Math.floor(n.y*(100/s.height())),0,100);d=e(100-Math.floor(d.y*(100/g.height())),0,100);f=u({h:c,s:h,b:d});s.css("backgroundColor",
u({h:c,s:100,b:d}));p.find(".minicolors-grid-inner").css("opacity",h/100);break;case "brightness":c=e(parseInt(d.x*(360/g.width())),0,360);h=e(100-Math.floor(d.y*(100/g.height())),0,100);d=e(100-Math.floor(n.y*(100/s.height())),0,100);f=u({h:c,s:h,b:d});s.css("backgroundColor",u({h:c,s:h,b:100}));p.find(".minicolors-grid-inner").css("opacity",1-d/100);break;default:c=e(360-parseInt(n.y*(360/s.height())),0,360),h=e(Math.floor(d.x*(100/g.width())),0,100),d=e(100-Math.floor(d.y*(100/g.height())),0,100),
f=u({h:c,s:h,b:d}),g.css("backgroundColor",u({h:c,s:100,b:100}))}a.val(z(f,x.letterCase))}b.is(".minicolors-opacity-slider")&&(l=x.opacity?parseFloat(1-m.y/v.height()).toFixed(2):1,x.opacity&&a.attr("data-opacity",l));t.find("SPAN").css({backgroundColor:f,opacity:l});F(a,f,l)}function y(a,b,c){var w,h,d,f,p;f=a.parent();d=a.data("minicolors-settings");p=f.find(".minicolors-swatch");var g=f.find(".minicolors-grid"),l=f.find(".minicolors-slider"),x=f.find(".minicolors-opacity-slider"),t=g.find("[class$=-picker]"),
s=l.find("[class$=-picker]"),y=x.find("[class$=-picker]");(w=z(v(a.val(),!0),d.letterCase))||(w=z(v(d.defaultValue,!0),d.letterCase));var n=B(w),m=0,q=0,r=0,q=Math.min(n.r,n.g,n.b),r=Math.max(n.r,n.g,n.b),m=r-q,q=0!==r?255*m/r:0,m=0!==q?n.r===r?(n.g-n.b)/m:n.g===r?2+(n.b-n.r)/m:4+(n.r-n.g)/m:-1,m=60*m;0>m&&(m+=360);q*=100/255;r*=100/255;0===q&&(m=360);b||a.val(w);d.opacity&&(h=""===a.attr("data-opacity")?1:e(parseFloat(a.attr("data-opacity")).toFixed(2),0,1),isNaN(h)&&(h=1),a.attr("data-opacity",
h),p.find("SPAN").css("opacity",h),b=e(x.height()-x.height()*h,0,x.height()),y.css("top",b+"px"));p.find("SPAN").css("backgroundColor",w);switch(d.control){case "wheel":f=e(Math.ceil(0.75*q),0,g.height()/2);p=m*Math.PI/180;d=e(75-Math.cos(p)*f,0,g.width());b=e(75-Math.sin(p)*f,0,g.height());t.css({top:b+"px",left:d+"px"});b=150-r/(100/g.height());""===w&&(b=0);s.css("top",b+"px");l.css("backgroundColor",u({h:m,s:q,b:100}));break;case "saturation":d=e(5*m/12,0,150);b=e(g.height()-Math.ceil(r/(100/
g.height())),0,g.height());t.css({top:b+"px",left:d+"px"});b=e(l.height()-q*(l.height()/100),0,l.height());s.css("top",b+"px");l.css("backgroundColor",u({h:m,s:100,b:r}));f.find(".minicolors-grid-inner").css("opacity",q/100);break;case "brightness":d=e(5*m/12,0,150);b=e(g.height()-Math.ceil(q/(100/g.height())),0,g.height());t.css({top:b+"px",left:d+"px"});b=e(l.height()-r*(l.height()/100),0,l.height());s.css("top",b+"px");l.css("backgroundColor",u({h:m,s:q,b:100}));f.find(".minicolors-grid-inner").css("opacity",
1-r/100);break;default:d=e(Math.ceil(q/(100/g.width())),0,g.width()),b=e(g.height()-Math.ceil(r/(100/g.height())),0,g.height()),t.css({top:b+"px",left:d+"px"}),b=e(l.height()-m/(360/l.height()),0,l.height()),s.css("top",b+"px"),g.css("backgroundColor",u({h:m,s:100,b:100}))}c||F(a,w,h)}function F(a,b,c){var e=a.data("minicolors-settings");b+c!==a.data("minicolors-lastChange")&&(a.data("minicolors-lastChange",b+c),e.change&&(e.changeDelay?(clearTimeout(a.data("minicolors-changeTimeout")),a.data("minicolors-changeTimeout",
setTimeout(function(){e.change.call(a.get(0),b,c)},e.changeDelay))):e.change.call(a.get(0),b,c)),a.trigger("change").trigger("input"))}function H(a){var b=v(c(a).val(),!0),b=B(b);a=c(a).attr("data-opacity");if(!b)return null;void 0!==a&&c.extend(b,{a:parseFloat(a)});return b}function I(a,b){var k=v(c(a).val(),!0),k=B(k),e=c(a).attr("data-opacity");if(!k)return null;void 0===e&&(e=1);return b?"rgba("+k.r+", "+k.g+", "+k.b+", "+parseFloat(e)+")":"rgb("+k.r+", "+k.g+", "+k.b+")"}function z(a,b){return"uppercase"===
b?a.toUpperCase():a.toLowerCase()}function v(a,b){a=a.replace(/[^A-F0-9]/ig,"");if(3!==a.length&&6!==a.length)return"";3===a.length&&b&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]);return"#"+a}function e(a,b,c){a<b&&(a=b);a>c&&(a=c);return a}function J(a){var b=[a.r.toString(16),a.g.toString(16),a.b.toString(16)];c.each(b,function(a,c){1===c.length&&(b[a]="0"+c)});return"#"+b.join("")}function u(a){var b=J,c,e,h;c=Math.round(a.h);var d=Math.round(255*a.s/100);a=Math.round(255*a.b/100);if(0===d)c=e=h=a;else{var d=
(255-d)*a/255,f=(a-d)*(c%60)/60;360===c&&(c=0);60>c?(c=a,h=d,e=d+f):120>c?(e=a,h=d,c=a-f):180>c?(e=a,c=d,h=d+f):240>c?(h=a,c=d,e=a-f):300>c?(h=a,e=d,c=d+f):360>c?(c=a,e=d,h=a-f):h=e=c=0}a={r:Math.round(c),g:Math.round(e),b:Math.round(h)};return b(a)}function B(a){a=parseInt(-1<a.indexOf("#")?a.substring(1):a,16);return{r:a>>16,g:(a&65280)>>8,b:a&255}}c.minicolors={defaultSettings:{animationSpeed:100,animationEasing:"swing",change:null,changeDelay:0,control:"hue",defaultValue:"",hide:null,hideSpeed:100,
inline:!1,letterCase:"lowercase",opacity:!1,position:"default",show:null,showSpeed:100,swatchPosition:"left",textfield:!0,theme:"default"}};c.extend(c.fn,{minicolors:function(a,b){switch(a){case "destroy":return c(this).each(function(){C(c(this))}),c(this);case "hide":return t(),c(this);case "opacity":if(void 0===b)return c(this).attr("data-opacity");c(this).each(function(){var a=c(this).attr("data-opacity",b);y(a)});return c(this);case "rgbObject":return H(c(this),"rgbaObject"===a);case "rgbString":case "rgbaString":return I(c(this),
"rgbaString"===a);case "settings":if(void 0===b)return c(this).data("minicolors-settings");c(this).each(function(){var a=c(this).data("minicolors-settings")||{};C(c(this));c(this).minicolors(c.extend(!0,a,b))});return c(this);case "show":return A(c(this).eq(0)),c(this);case "value":if(void 0===b)return c(this).val();c(this).each(function(){var a=c(this).val(b);y(a)});return c(this);default:return"create"!==a&&(b=a),c(this).each(function(){G(c(this),b)}),c(this)}}});c(document).on("mousedown.minicolors touchstart.minicolors",
function(a){c(a.target).parents().add(a.target).hasClass("minicolors")||t()}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(a){var b=c(this);a.preventDefault();c(document).data("minicolors-target",b);D(b,a,!0)}).on("mousemove.minicolors touchmove.minicolors",function(a){var b=c(document).data("minicolors-target");b&&D(b,a)}).on("mouseup.minicolors touchend.minicolors",function(){c(this).removeData("minicolors-target")}).on("mousedown.minicolors touchstart.minicolors",
".minicolors-swatch",function(a){a.preventDefault();a=c(this).parent().find(".minicolors-input");a.parent().hasClass("minicolors-focus")?t(a):A(a)}).on("focus.minicolors",".minicolors-input",function(a){a=c(this);a.data("minicolors-initialized")&&A(a)}).on("blur.minicolors",".minicolors-input",function(a){a=c(this);var b=a.data("minicolors-settings");a.data("minicolors-initialized")&&(a.val(v(a.val(),!0)),""===a.val()&&a.val(v(b.defaultValue,!0)),a.val(z(a.val(),b.letterCase)))}).on("keydown.minicolors",
".minicolors-input",function(a){var b=c(this);if(b.data("minicolors-initialized"))switch(a.keyCode){case 9:t();break;case 13:case 27:t(),b.blur()}}).on("keyup.minicolors",".minicolors-input",function(a){a=c(this);a.data("minicolors-initialized")&&y(a,!0)}).on("paste.minicolors",".minicolors-input",function(a){var b=c(this);b.data("minicolors-initialized")&&setTimeout(function(){y(b,!0)},1)})}(jQuery);